# Build the program in the local tree
.PHONY: all
all:
	$(NINJA) -C $(mesonbuilddir)

# Install the program
.PHONY: install
install: all
	$(MESON) install -C $(mesonbuilddir)

# Remove files created during 'all'
.PHONY: clean
clean:
	$(NINJA) -C $(mesonbuilddir) -t clean
	$(RM) -r $(mesonbuilddir)

# Remove files created during 'install'
.PHONY: uninstall
uninstall:
	$(NINJA) uninstall -C $(mesonbuilddir)

# Make tarball
.PHONY: dist
dist:
	$(MESON) dist -C $(mesonbuilddir) --formats gztar

# Run tests
.PHONY: check
check:
	$(MESON) test -C $(mesonbuilddir)

#.PHONY: $(mesonbuilddir)
#$(mesonbuilddir):
#	$(MESON) setup \
#		-Ddefault_library=shared \
#		-Dprefix=${prefix} \
#		-Dbindir=${bindir} \
#		-Ddatadir=${datadir} \
#		-Dincludedir=${includedir} \
#		-Dinfodir=${infodir} \
#		-Dlibdir=${libdir} \
#		-Dlocaledir=${localedir} \
#		-Dexperimental=${enable_experimental} \
#		-Dmonolith=${enable_monolith} \
#		-Dtestbed=${enable_testbed} \
#		-Dexclude-manpages=${enable_exclude_manpages} \
#		-Dmalicious=${enable_malicious} \
#		-Dbenchmarks=${enable_benchmarks} \
#		-Dpoisoning=${enable_poisoning} \
#		-Dnse-histogram=${enable_nse_histogram} \
#		-Ddisable-autostart=${enable_disable_autostart} \
#		-Dinstall-rpath=${enable_install_rpath} \
#		-Dheap-statistics=${enable_heap_statistics} \
#		-Dlogging=${enable_logging} \
#		${mesonbuilddir}




