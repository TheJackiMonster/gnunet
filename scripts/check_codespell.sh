#!/bin/bash
set -exuo pipefail

job_dir=$(dirname "${BASH_SOURCE[0]}")

skip=$(cat <<EOF
ABOUT-NLS
*/debian/tmp/**
*.bbl
*.bib
*build-aux*
*.bst
*.cache/*
*/cbdc-es.tex
*/cbdc-it.tex
ChangeLog
*.cls
configure*
config.status
config.guess
config.sub
depcomp
*/contrib/*
*/contrib/hellos/**
*.dat
*.deflate
*.doc
*/doc/*
**/doc/flows/main.de.tex
*/doc/texinfo.tex
*.docx
*.ecc
*.eot
*.epgz
*.eps
*.epub
**/ExchangeSelection/example.ts
*.fee
*.fees
*.file
**/fonts/**
*.gif
*/.git/**
*.gz
*/i18n/strings.ts
*.info
*.jpeg
*.jpg
*.??.json
*.json
*.json-*
*/keys/*
*key
*.latexmkrc
*libtool*
ltmain.sh
*.log
*/m4/*
*.m4
**/*.map
*.min.js
*.mp4
*.odg
*.ods
*.odt
*.pack.js
*.pdf
*.png
*.PNG
*.po
*.pptx
*.priv
**/rfc.bib
*.rpath
*.sqlite
**/*.svg
*.svg
*.tag
**/signing-key.asc
**/templating/mustach**
*/templating/test?/**
*/testcurl/test_tricky.c
*.tgz
*.ttf
*.ttf
**/valgrind.h
*/vpn/tests/**
*.wav
*.woff
*.woff2
*.xcf
*.xlsx
*.zkey
EOF
);

echo Current directory: `pwd`

codespell -I "${job_dir}"/dictionary.txt -S ${skip//$'\n'/,}
